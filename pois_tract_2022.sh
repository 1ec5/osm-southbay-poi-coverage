#!/bin/bash

jq -rs '(.[0].features | map(.properties) | map({tract: .NAME, population: .population})) + (.[1].features | map(.properties) | map({tract: .NAME, median_household_income: .median_household_income})) + (.[2].features | map(.properties) | map({tract: .NAME, non_hispanic_white_alone: .non_hispanic_white_alone})) + (.[3].features | map(.properties) | map({tract: .NAME, osm_2020: .NUMPOINTS})) + (.[4].features | map(.properties) | map({tract: .NAME, osm_2023: .NUMPOINTS})) + (.[5].features | map(.properties) | map({tract: .NAME, sdp: .NUMPOINTS})) | group_by(.tract) | map_values(add) | (.[0] | keys_unsorted), map(to_entries | map(.value))[] | @csv' tl_2022_06_085_tract_density.geojson tl_2022_06_085_tract_income.geojson tl_2022_06_085_tract_race.geojson before-named_tract_2022.geojson 2023-08-05-named_tract_2022.geojson sdp_tract_2022.geojson > pois_tract_2022.csv
